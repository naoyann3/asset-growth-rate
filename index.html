<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ä¸»è¦è³‡ç”£ å††å»ºã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»ãƒˆãƒ©ãƒƒã‚«ãƒ¼ (2021å¹´ã€œ)</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Roboto+Mono:wght@500&display=swap" rel="stylesheet">
<style>
    body { font-family: 'Noto Sans JP', sans-serif; background-color: #f1f5f9; }
    .mono { font-family: 'Roboto Mono', monospace; }
    .card { background: white; border-radius: 16px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); }
    
    /* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒ« */
    .asset-checkbox:checked + label {
        background-color: var(--active-color);
        color: white !important;
        border-color: var(--active-color);
    }
    .asset-checkbox:checked + label svg { transform: scale(1); }
    .asset-checkbox:checked + label .check-circle { border-color: white; }
</style>
</head>
<body class="p-3 md:p-8 text-slate-800">

<div class="max-w-7xl mx-auto space-y-6">

    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div class="bg-slate-800 text-white p-6 rounded-2xl shadow-lg">
        <h1 class="text-xl md:text-2xl font-bold flex items-center gap-2">
            ğŸ“ˆ ä¸»è¦è³‡ç”£ å††å»ºã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»ãƒˆãƒ©ãƒƒã‚«ãƒ¼
        </h1>
        <p class="text-xs text-slate-400 mt-1">2021å¹´1æœˆã«100ä¸‡å††ã‚’æŠ•è³‡ã—ãŸå ´åˆã®è³‡ç”£æ¨ç§»</p>
    </div>

    <!-- ã‚¢ã‚»ãƒƒãƒˆé¸æŠã‚¨ãƒªã‚¢ -->
    <div class="card p-5">
        <h3 class="font-bold text-sm text-slate-500 uppercase tracking-wider mb-4 border-b pb-2">è¡¨ç¤ºã‚¢ã‚»ãƒƒãƒˆã‚’é¸æŠ</h3>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- æš—å·è³‡ç”£ -->
            <div>
                <p class="font-bold text-slate-700 mb-3 text-sm">ğŸª™ æš—å·è³‡ç”£</p>
                <div class="space-y-2" id="crypto-assets"></div>
            </div>
            <!-- æ ªå¼ãƒ»æŒ‡æ•° -->
            <div>
                <p class="font-bold text-slate-700 mb-3 text-sm">ğŸ’¹ æ ªå¼ãƒ»æŒ‡æ•°</p>
                <div class="space-y-2" id="stock-assets"></div>
            </div>
            <!-- ã‚³ãƒ¢ãƒ‡ã‚£ãƒ†ã‚£ -->
            <div>
                <p class="font-bold text-slate-700 mb-3 text-sm">ğŸ’ ã‚³ãƒ¢ãƒ‡ã‚£ãƒ†ã‚£</p>
                <div class="space-y-2" id="commodity-assets"></div>
            </div>
        </div>
    </div>
    
    <!-- ãƒ¡ã‚¤ãƒ³ãƒãƒ£ãƒ¼ãƒˆã‚¨ãƒªã‚¢ -->
    <div class="card p-4 md:p-6">
        <!-- æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒœã‚¿ãƒ³ -->
        <div class="flex flex-wrap gap-2 mb-4 border-b pb-4 justify-center md:justify-start">
            <button class="year-filter-btn px-4 py-1.5 text-xs font-bold rounded-full transition bg-slate-700 text-white shadow-inner" data-year="all" onclick="setRange('all', this)">å…¨æœŸé–“</button>
            <button class="year-filter-btn px-4 py-1.5 text-xs font-bold rounded-full transition bg-white text-slate-600 hover:bg-slate-100 border" onclick="setRange('2021', this)">2021å¹´</button>
            <button class="year-filter-btn px-4 py-1.5 text-xs font-bold rounded-full transition bg-white text-slate-600 hover:bg-slate-100 border" onclick="setRange('2022', this)">2022å¹´</button>
            <button class="year-filter-btn px-4 py-1.5 text-xs font-bold rounded-full transition bg-white text-slate-600 hover:bg-slate-100 border" onclick="setRange('2023', this)">2023å¹´</button>
            <button class="year-filter-btn px-4 py-1.5 text-xs font-bold rounded-full transition bg-white text-slate-600 hover:bg-slate-100 border" onclick="setRange('2024', this)">2024å¹´</button>
            <button class="year-filter-btn px-4 py-1.5 text-xs font-bold rounded-full transition bg-white text-slate-600 hover:bg-slate-100 border" onclick="setRange('2025', this)">2025å¹´</button>
        </div>
        <div class="h-[500px] w-full relative">
            <canvas id="chart"></canvas>
        </div>
        <p class="text-[10px] text-slate-400 text-right mt-4">â€»2021å¹´1æœˆã«100ä¸‡å††ã‚’æŠ•è³‡ã—ãŸéš›ã®å††å»ºã¦è©•ä¾¡é¡ã®æ¨ç§» (æ ªå¼åˆ†å‰²ãƒ»ç‚ºæ›¿å¤‰å‹•ã‚’è€ƒæ…®)</p>
    </div>

    <!-- è§£èª¬ã‚¨ãƒªã‚¢ -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <div class="card p-5 border-t-4 border-purple-400">
            <h3 class="font-bold text-lg text-purple-700 mb-2">2021å¹´ : é‡‘èç·©å’Œãƒãƒ–ãƒ«</h3>
            <p class="text-sm text-slate-600 leading-relaxed">
                ã‚³ãƒ­ãƒŠç¦ã®é‡‘èç·©å’Œã‚’èƒŒæ™¯ã«ã€ã»ã¼å…¨ã¦ã®è³‡ç”£ãŒä¸Šæ˜‡ã€‚ç‰¹ã«æš—å·è³‡ç”£ã¯å‡„ã¾ã˜ã„ä¼¸ã³ã‚’è¦‹ã›ã€**BTCã¯å¹´åˆæ¥2å€ä»¥ä¸Š**ã«ã€‚NVIDIAã‚‚é ­è§’ã‚’ç¾ã—å§‹ã‚ã‚‹ã€‚
            </p>
        </div>
        <div class="card p-5 border-t-4 border-slate-400">
            <h3 class="font-bold text-lg text-slate-700 mb-2">2022å¹´ : å†¬ã®æ™‚ä»£</h3>
            <p class="text-sm text-slate-600 leading-relaxed">
                FRBã®æ€¥æ¿€ãªåˆ©ä¸Šã’ã«ã‚ˆã‚Šã€ãƒªã‚¹ã‚¯è³‡ç”£ãŒæš´è½ã€‚ãƒã‚¤ãƒ†ã‚¯æ ªã‚„æš—å·è³‡ç”£ã¯è»’ä¸¦ã¿**å¹´åˆæ¥-50%ã‚’ä¸‹å›ã‚‹**å¤§ãƒ€ãƒ¡ãƒ¼ã‚¸ã€‚ä¸€æ–¹ã€å®‰å…¨è³‡ç”£ã®GOLDã¯åº•å …ãæ¨ç§»ã€‚
            </p>
        </div>
        <div class="card p-5 border-t-4 border-emerald-400">
            <h3 class="font-bold text-lg text-emerald-700 mb-2">2023å¹´ã€œ : AIé©å‘½ã¨å›å¾©</h3>
            <p class="text-sm text-slate-600 leading-relaxed">
                NVIDIAãŒAIãƒ–ãƒ¼ãƒ ã‚’ç‰½å¼•ã—ã€æ ªä¾¡ã¯**é©šç•°çš„ãªä¸Šæ˜‡**ã‚’è¨˜éŒ²ã€‚BTCã‚‚ç¾ç‰©ETFæ‰¿èªæœŸå¾…ã§å›å¾©åŸºèª¿ã«ã€‚GOLDã¯åœ°æ”¿å­¦ãƒªã‚¹ã‚¯ã®é«˜ã¾ã‚Šã‹ã‚‰å²ä¸Šæœ€é«˜å€¤ã‚’æ›´æ–°ã—ç¶šã‘ã‚‹ã€‚
            </p>
        </div>
    </div>
</div>

<script>
    const assetConfig = {
        'BTC': { name: 'Bitcoin', category: 'crypto', color: '#F7931A' },
        'ETH': { name: 'Ethereum', category: 'crypto', color: '#627EEA' },
        'BNB': { name: 'BNB', category: 'crypto', color: '#1e1e1e' },
        'S&P 500 (å††)': { name: 'S&P 500 (å††å»º)', category: 'stock', color: '#3B82F6', checked: true },
        'æ—¥çµŒå¹³å‡': { name: 'æ—¥çµŒå¹³å‡', category: 'stock', color: '#DC2626' },
        'NVIDIA': { name: 'NVIDIA', category: 'stock', color: '#76B900', checked: true },
        'AMAZON': { name: 'Amazon', category: 'stock', color: '#14B8A6' },
        'GOOGLE': { name: 'Google', category: 'stock', color: '#8B5CF6' },
        'GOLD': { name: 'Gold', category: 'commodity', color: '#D4AF37', checked: true },
        'SILVER': { name: 'Silver', category: 'commodity', color: '#A8A8A8' }
    };

    const labels = [];
    for (let y = 2021; y <= 2025; y++) {
        for (let m = 1; m <= 12; m++) {
            if (y === 2025 && m > 11) break;
            labels.push(`${y}-${String(m).padStart(2, '0')}`);
        }
    }

    const usdjpy = [104.73,106.57,110.73,109.32,109.6,111.1,109.68,109.99,111.26,114,113.01,115.07,115.08,114.95,121.69,130.84,128.7,135.76,133.23,138.95,144.75,148.74,137.97,131.2,130.14,136.18,132.82,136.3,139.33,144.32,142.25,145.53,149.34,151.7,148.26,141.04,147.24,149.92,151.34,157.72,157.28,160.89,149.88,146.17,143.59,152.08,149.77,157.2,155.2,150.62,149.91,142.96,144.04,144.03,150.71,147.86,147.86,153.99,156.18];

    const rawData = {
        'BTC': [33108,45164,58763,57720,37298,35026,41553,47130,43823,61309,56882,46219,38498,43188,45525,37650,31793,19926,23303,20043,19423,20496,17163,16537,23125,23130,28473,29252,27216,30472,29232,25937,26962,34650,37712,42272,42580,61169,71332,60666,67530,62754,64626,58978,63339,70281,96405,93557,94536,84381,82548,94184,104598,107171,115765,108226,114048,109602,90374],
        'ETH': [1312,1418,1917,2772,2708,2273,2532,3430,3000,4287,4628,3677,2686,2922,3282,2727,1941,1069,1680,1555,1328,1572,1294,1195,1585,1604,1821,1868,1873,1933,1856,1645,1670,1815,2051,2281,2283,3339,3647,3014,3762,3437,3231,2513,2603,2519,3702,3337,3298,2236,1821,1793,2528,2486,3698,4391,4144,3848,2991],
        'BNB': [44,210,302,623,353,303,332,464,387,524,623,511,374,395,428,377,320,219,283,279,284,325,300,246,312,301,317,337,306,240,240,216,214,226,227,312,300,399,606,578,593,582,576,532,567,576,653,702,677,587,604,599,657,656,783,857,1008,1088,875],
        'NVIDIA': [130,137,133,150,162,200,195,224,207,256,327,294,245,244,273,185,188,152,182,151,121,135,169,146,195,232,278,277,378,423,467,494,435,408,468,495,615,791,904,864,1096,124,117,119,121,133,138,134,120,125,108,109,135,158,178,174,187,202,177],
        'AMAZON': [162,156,155,173,161,172,166,174,166,169,175,167,150,154,163,124,120,106,135,127,113,103,97,84,103,94,103,105,121,130,134,138,127,133,146,152,175,180,180,175,181,193,187,179,195,202,220,250,236,242,222,213,201,205,208,232,255,270,279],
        'GOOGLE': [91,101,103,118,118,122,135,145,134,148,142,145,135,135,140,114,114,109,116,108,96,95,101,88,99,90,104,107,123,120,133,136,131,124,133,140,140,138,151,163,173,182,172,163,166,171,169,189,204,170,155,159,172,176,192,213,243,281,320],
        'S&P 500 (å††)': [13641,14043,15142,15861,15975,16444,16777,17277,16951,18163,18432,19204,17837,17684,19683,18851,18669,18301,19236,19417,18548,20365,19380,18035,18524,19213,19167,19670,20875,22664,22984,23519,22940,22238,23926,24281,26026,27391,28559,28832,29510,31789,29851,29198,29562,32262,32695,34182,33955,31801,30280,28788,30919,32527,34608,34812,36175,38371,38984],
        'æ—¥çµŒå¹³å‡': [27663,28966,29178,28812,28860,28791,27283,28089,29452,28892,27821,28791,27001,26526,27821,26847,27279,26393,27801,28091,25937,27587,27968,26094,27327,27445,28041,28856,30887,33189,33172,32619,31857,30858,33486,33464,36286,39166,40369,38405,38487,39583,39101,38647,37919,39081,38208,39894,39572,37155,35617,36045,37965,40487,41069,42718,44932,52411,50253],
        'GOLD': [6276,6199,6066,6195,6549,6554,6450,6369,6368,6495,6728,6580,6755,6913,7464,7901,7695,7954,7699,7721,7794,7920,7944,7854,8024,7990,8249,8620,8822,8871,8879,8988,9155,9246,9604,9486,9622,9779,10428,11561,11880,11859,12185,11675,11863,12978,13155,13082,13676,14169,14298,14996,15349,15638,15832,16020,17429,19828,20454],
        'SILVER': [88.8,96.0,93.0,93.0,100.1,99.0,94.8,88.2,86.3,87.7,92.0,84.8,88.7,89.7,99.1,102.9,93.4,95.6,86.6,89.0,89.4,93.7,98.2,103.3,101.8,96.6,96.4,109.3,108.9,108.7,111.2,112.2,113.1,110.3,115.8,114.7,110.9,112.0,120.2,137.8,151.3,153.2,154.5,137.9,141.0,158.9,156.5,154.1,156.2,160.3,162.1,153.4,156.3,169.8,180.6,183.7,204.6,243.2,256.6]
    };
    
    let myChart;
    let currentRange = 'all';
    const jpyDatasets = {}; 
    const performanceDatasets = {}; 

    // --- 2. ãƒ‡ãƒ¼ã‚¿å‡¦ç†é–¢æ•° ---
    function processData() {
        const initialInvestment = 1_000_000;
        
        for (const [id, config] of Object.entries(assetConfig)) {
            let prices = rawData[id];
            
            let valueSeries = [];
            
            if (config.currency === 'USD') {
                let shares = 1;
                // åˆ†å‰²ã‚’è€ƒæ…®ã—ãŸ100ä¸‡å††åˆ†ã®åˆæœŸä¿æœ‰æ•°ã‚’è¨ˆç®—
                if (id === 'NVIDIA') shares = (initialInvestment / (prices[0] * usdjpy[0])) / 1;
                else if (id === 'GOOGLE') shares = (initialInvestment / (prices[0] * usdjpy[0])) / 1;
                else shares = initialInvestment / (prices[0] * usdjpy[0]);
                
                valueSeries = prices.map((price, idx) => {
                    let currentShares = shares;
                    if (id === 'NVIDIA') {
                        if (idx >= 41) currentShares = shares * 40;
                        else if (idx >= 6) currentShares = shares * 4;
                    } else if (id === 'GOOGLE') {
                        if (idx >= 18) currentShares = shares * 20;
                    }
                    return price * currentShares * usdjpy[idx];
                });
            } else {
                const initialPrice = prices[0];
                const shares = initialInvestment / initialPrice;
                valueSeries = prices.map(p => p * shares);
            }
            jpyDatasets[id] = valueSeries;
        }
    }

    function createCheckboxes() {
        for (const [id, config] of Object.entries(assetConfig)) {
            const container = document.getElementById(`${config.category}-assets`);
            const checked = config.checked ? 'checked' : '';
            
            const html = `
                <div class="flex items-center">
                    <input type="checkbox" id="cb-${id.replace(/\s|\(|\)/g, '')}" class="hidden asset-checkbox" 
                           onchange="updateChart()" data-id="${id}" ${checked}
                           style="--active-color: ${config.color}">
                    <label for="cb-${id.replace(/\s|\(|\)/g, '')}" class="flex items-center cursor-pointer p-2 rounded-lg text-sm font-bold w-full border-2 border-slate-200 transition text-slate-600 hover:bg-slate-50">
                        <div class="check-circle w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center transition" style="border-color: ${config.color}">
                             <svg class="w-3 h-3 text-white transform scale-0 transition-transform" fill="currentColor" viewBox="0 0 20 20"><path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"></path></svg>
                        </div>
                        <span>${config.name}</span>
                    </label>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', html);
        }
    }

    function initChart() {
        const ctx = document.getElementById('chart').getContext('2d');
        myChart = new Chart(ctx, {
            type: 'line',
            data: { labels: [], datasets: [] },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { 
                        position: 'top',
                        labels: { usePointStyle: true, padding: 20, font: { weight: 'bold' } }
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        callbacks: {
                            label: function(context) {
                                const id = context.dataset.assetId;
                                const valYen = context.raw;
                                const initialVal = jpyDatasets[id][0];
                                const performance = ((valYen / initialVal) - 1) * 100;
                                const formattedVal = new Intl.NumberFormat('ja-JP', { style: 'currency', currency: 'JPY', maximumFractionDigits:0 }).format(valYen);
                                return `${context.dataset.label}: ${formattedVal} (${performance > 0 ? '+' : ''}${performance.toFixed(1)}%)`;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        type: 'time',
                        time: { unit: 'year', displayFormats: { 'year': 'yyyyå¹´', 'month': 'yyyyå¹´Mæœˆ'} },
                        grid: { color: '#e2e8f0' },
                        ticks: { color: '#475569' }
                    },
                    y: {
                        grid: { color: '#e2e8f0' },
                        ticks: {
                            callback: function(value) { return (value / 10000).toLocaleString() + 'ä¸‡å††'; },
                            color: '#475569'
                        },
                        title: { display: true, text: 'å††å»ºã¦è©•ä¾¡é¡ (åˆæœŸæŠ•è³‡100ä¸‡å††)' }
                    }
                },
                elements: {
                    point: { radius: 0, hitRadius: 20 },
                    line: { borderWidth: 2.5, tension: 0.2 }
                }
            }
        });
        updateChart();
    }

    window.setRange = function(range, btn) {
        currentRange = range;
        document.querySelectorAll('.year-btn').forEach(b => {
            b.className = 'year-btn px-4 py-1.5 text-xs font-bold rounded-full transition bg-white text-slate-500 hover:bg-slate-100 border';
        });
        btn.className = 'year-btn px-4 py-1.5 text-xs font-bold rounded-full transition bg-indigo-600 text-white shadow-md';
        updateChart();
    }

    window.updateChart = function() {
        const selectedIds = Array.from(document.querySelectorAll('.asset-checkbox:checked')).map(cb => cb.dataset.id);
        
        let start = 0, end = labels.length;
        if (currentRange !== 'all') {
            start = labels.findIndex(l => l.startsWith(currentRange));
            end = labels.findLastIndex(l => l.startsWith(currentRange)) + 1;
        }

        const rangeLabels = (start === -1) ? [] : labels.slice(start, end);
        
        myChart.data.labels = rangeLabels;
        myChart.data.datasets = selectedIds.map(id => {
            const dataSlice = (start === -1) ? [] : jpyDatasets[id].slice(start, end);
            return {
                label: assetConfig[id].name,
                assetId: id,
                data: dataSlice,
                borderColor: assetConfig[id].color,
                backgroundColor: assetConfig[id].color + '33',
            };
        });
        
        myChart.options.scales.x.time.unit = (currentRange === 'all') ? 'year' : 'month';
        myChart.update();
    }

    document.addEventListener('DOMContentLoaded', () => {
        processData();
        createCheckboxes();
        initChart();
    });
</script>
</body>
</html>
